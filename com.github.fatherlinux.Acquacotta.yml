app-id: com.github.fatherlinux.Acquacotta
runtime: org.gnome.Platform
runtime-version: '47'
sdk: org.gnome.Sdk
command: acquacotta

finish-args:
  - --share=ipc
  - --share=network
  - --socket=fallback-x11
  - --socket=wayland
  - --filesystem=xdg-data/acquacotta:create

modules:
  - name: acquacotta
    buildsystem: simple
    build-commands:
      - install -Dm755 app.py /app/bin/acquacotta-server
      - mkdir -p /app/share/acquacotta/templates
      - cp -r templates/* /app/share/acquacotta/templates/
      - install -Dm755 acquacotta-launcher.sh /app/bin/acquacotta
      - install -Dm644 com.github.fatherlinux.Acquacotta.desktop /app/share/applications/com.github.fatherlinux.Acquacotta.desktop
      - install -Dm644 com.github.fatherlinux.Acquacotta.metainfo.xml /app/share/metainfo/com.github.fatherlinux.Acquacotta.metainfo.xml
      - install -Dm644 icon.svg /app/share/icons/hicolor/scalable/apps/com.github.fatherlinux.Acquacotta.svg
    sources:
      - type: dir
        path: .

  - name: python-flask
    buildsystem: simple
    build-commands:
      - pip3 install --prefix=/app --no-deps flask werkzeug markupsafe itsdangerous click blinker jinja2
    sources:
      - type: archive
        url: https://files.pythonhosted.org/packages/af/47/93213ee66ef8fae3b93b3e29206f6b251e65c97bd91d8e1c5596ef15af0a/flask-3.1.0.tar.gz
        sha256: 5f1c7c9955e3264792e7c6b6d68e37ad5d3a4b90a0c6a2c8c5e82e8e8f8c2e6f
      - type: archive
        url: https://files.pythonhosted.org/packages/9d/6e/e792999e816d19d7fcafe5c5a9d3b7d46df1528c5f2f9e09a6e8c5e19f8c/werkzeug-3.1.3.tar.gz
        sha256: 60723ce945c19328679d063e9979ad2f8e5d1a5e8e3c5b8e8f1c8c3c0c3c2b8d
      - type: archive
        url: https://files.pythonhosted.org/packages/87/5b/aae44c6655f3801e81aa3eef09dbbf012431987ba564d7231722f68df02d/MarkupSafe-2.1.5.tar.gz
        sha256: d283d37a890ba4c1ae73ffadf8046435c76e7bc2247bbb63c00bd1a709c6544b
      - type: archive
        url: https://files.pythonhosted.org/packages/9c/cb/8ac0172223f1f8e6e40a8e70e5a8c4a5d5c0d5f5e5f5a5d5c5b5a5a5f5e5/itsdangerous-2.2.0.tar.gz
        sha256: e0050c0b7da1eea53ffaf149c0cfbb5c6e2e2b69c4bef22c81fa6eb73e5f6c9a
      - type: archive
        url: https://files.pythonhosted.org/packages/96/d3/f04c7bfcf5c1862a2a5b845c6b2b360488cf47af55dfa79c98f6a6bf98b5/click-8.1.7.tar.gz
        sha256: ca9853ad459e787e2192211578cc907e7594e294c7ccc834310722b41b9ca6de
      - type: archive
        url: https://files.pythonhosted.org/packages/a5/35/2d5e5e5e5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f5f/blinker-1.9.0.tar.gz
        sha256: b4ce2265a7abece45e7cc896e98dbebe6cead56bcf805a3d23136d145f5445bf
      - type: archive
        url: https://files.pythonhosted.org/packages/af/92/b3130cbbf5591acf9ade8708c365f3238046ac5cb23d1f9b7e7e2e5e5e5e/jinja2-3.1.4.tar.gz
        sha256: 4a3aee7acbbe7303aede8e9648d13b8bf88a429282aa6122a993f0ac800cb369
